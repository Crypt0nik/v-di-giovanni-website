<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Configurateur Complet - 3 Couleurs Principales + Rabat Colors</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 100vh;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .header h1 {
            color: #d4a574;
            margin: 0 0 10px 0;
            font-size: 2rem;
        }

        .test-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 1.3rem;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #d4a574;
        }

        .color-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .color-btn {
            padding: 15px;
            border-radius: 12px;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 600;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .color-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .color-btn.selected {
            border-color: #d4a574;
            box-shadow: 0 0 20px rgba(212, 165, 116, 0.4);
        }

        .bag-display {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 400px;
            background: #f8f9fa;
            border-radius: 12px;
            margin: 20px 0;
            position: relative;
        }

        .bag-parts {
            position: relative;
            width: 300px;
            height: 300px;
        }

        .bag-part {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .status {
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-weight: 500;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status.warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .info-panel {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .validation-tests {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .test-item {
            padding: 10px;
            border-radius: 8px;
            border-left: 4px solid #ddd;
            background: #f8f9fa;
        }

        .test-item.pass {
            border-left-color: #28a745;
            background: #d4edda;
        }

        .test-item.fail {
            border-left-color: #dc3545;
            background: #f8d7da;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üé® Test Configurateur Complet</h1>
        <p>Validation du syst√®me avec 3 couleurs principales + couleurs rabat depuis dossier colors</p>
    </div>

    <div class="test-section">
        <div class="section-title">1. Couleurs Principales (Corps & Anse) - Syst√®me PNG</div>
        <div class="info-panel">
            <strong>Source:</strong> /images/bag-parts/main-colors/[couleur]/body.png + handle.png
        </div>
        <div class="color-grid">
            <div class="color-btn" data-main-color="#2C2C2C" data-folder="noir" style="background: #2C2C2C;">
                Noir √âl√©gant
            </div>
            <div class="color-btn" data-main-color="#8B4513" data-folder="marron-cognac" style="background: #8B4513;">
                Marron Cognac
            </div>
            <div class="color-btn selected" data-main-color="#FFFFFF" data-folder="blanc" style="background: #FFFFFF; color: #333; text-shadow: none;">
                Blanc Pur
            </div>
        </div>
    </div>

    <div class="test-section">
        <div class="section-title">2. Couleurs du Rabat - Syst√®me PNG depuis Colors</div>
        <div class="info-panel">
            <strong>Source:</strong> /images/bag-parts/colors/[couleur]/flap.png
        </div>
        <div class="color-grid">
            <div class="color-btn" data-flap-color="#8B4513" data-flap-folder="marron-cognac" style="background: #8B4513;">
                Marron Cognac
            </div>
            <div class="color-btn" data-flap-color="#2C2C2C" data-flap-folder="gris-fonce" style="background: #2C2C2C;">
                Gris Fonc√©
            </div>
            <div class="color-btn" data-flap-color="#D4A574" data-flap-folder="beige-nude" style="background: #D4A574;">
                Beige Nude
            </div>
            <div class="color-btn" data-flap-color="#F4E6E1" data-flap-folder="rose-poudre" style="background: #F4E6E1; color: #333; text-shadow: none;">
                Rose Poudr√©
            </div>
            <div class="color-btn" data-flap-color="#8B1538" data-flap-folder="bordeaux" style="background: #8B1538;">
                Bordeaux
            </div>
            <div class="color-btn selected" data-flap-color="#81D4E6" data-flap-folder="bleu-tiffany" style="background: #81D4E6; color: #333; text-shadow: none;">
                Bleu Tiffany (Nouveau)
            </div>
        </div>
    </div>

    <div class="test-section">
        <div class="section-title">3. Aper√ßu du Sac Configur√©</div>
        <div class="bag-display">
            <div class="bag-parts">
                <img id="bag-body" class="bag-part" src="/images/bag-parts/main-colors/blanc/body.png" alt="Corps du sac">
                <img id="bag-handle" class="bag-part" src="/images/bag-parts/main-colors/blanc/handle.png" alt="Anse du sac">
                <img id="bag-flap" class="bag-part" src="/images/bag-parts/colors/bleu-tiffany/flap.png" alt="Rabat du sac">
            </div>
        </div>
        
        <div id="current-config" class="info-panel">
            <strong>Configuration actuelle:</strong><br>
            Corps & Anse: <span id="main-color-name">Blanc Pur</span><br>
            Rabat: <span id="flap-color-name">Bleu Tiffany</span>
        </div>
    </div>

    <div class="test-section">
        <div class="section-title">4. Tests de Validation Automatiques</div>
        <div id="validation-results" class="validation-tests">
            <!-- Les r√©sultats seront ajout√©s ici par JavaScript -->
        </div>
    </div>

    <script>
        // Configuration des couleurs principales (limit√©es √† 3)
        const mainColors = [
            { name: "Noir √âl√©gant", color: "#2C2C2C", folder: "noir" },
            { name: "Marron Cognac", color: "#8B4513", folder: "marron-cognac" },
            { name: "Blanc Pur", color: "#FFFFFF", folder: "blanc" }
        ];

        // Configuration des couleurs de rabat (6 couleurs depuis dossier colors)
        const flapColors = [
            { name: "Marron Cognac", color: "#8B4513", folder: "marron-cognac" },
            { name: "Gris Fonc√©", color: "#2C2C2C", folder: "gris-fonce" },
            { name: "Beige Nude", color: "#D4A574", folder: "beige-nude" },
            { name: "Rose Poudr√©", color: "#F4E6E1", folder: "rose-poudre" },
            { name: "Bordeaux", color: "#8B1538", folder: "bordeaux" },
            { name: "Bleu Tiffany", color: "#81D4E6", folder: "bleu-tiffany" }
        ];

        let currentMainColor = "blanc";
        let currentFlapColor = "bleu-tiffany";

        // Gestionnaires d'√©v√©nements pour les couleurs principales
        document.querySelectorAll('[data-main-color]').forEach(btn => {
            btn.addEventListener('click', function() {
                // Retirer la s√©lection pr√©c√©dente
                document.querySelectorAll('[data-main-color]').forEach(b => b.classList.remove('selected'));
                
                // S√©lectionner le nouveau bouton
                this.classList.add('selected');
                
                // Mettre √† jour les images
                const folder = this.dataset.folder;
                currentMainColor = folder;
                
                document.getElementById('bag-body').src = `/images/bag-parts/main-colors/${folder}/body.png`;
                document.getElementById('bag-handle').src = `/images/bag-parts/main-colors/${folder}/handle.png`;
                
                // Mettre √† jour l'affichage
                const colorName = mainColors.find(c => c.folder === folder)?.name || folder;
                document.getElementById('main-color-name').textContent = colorName;
                
                runValidationTests();
            });
        });

        // Gestionnaires d'√©v√©nements pour les couleurs de rabat
        document.querySelectorAll('[data-flap-color]').forEach(btn => {
            btn.addEventListener('click', function() {
                // Retirer la s√©lection pr√©c√©dente
                document.querySelectorAll('[data-flap-color]').forEach(b => b.classList.remove('selected'));
                
                // S√©lectionner le nouveau bouton
                this.classList.add('selected');
                
                // Mettre √† jour l'image
                const folder = this.dataset.flapFolder;
                currentFlapColor = folder;
                
                document.getElementById('bag-flap').src = `/images/bag-parts/colors/${folder}/flap.png`;
                
                // Mettre √† jour l'affichage
                const colorName = flapColors.find(c => c.folder === folder)?.name || folder;
                document.getElementById('flap-color-name').textContent = colorName;
                
                runValidationTests();
            });
        });

        // Tests de validation
        function runValidationTests() {
            const tests = [
                {
                    name: "Nombre de couleurs principales",
                    test: () => mainColors.length === 3,
                    description: "Doit avoir exactement 3 couleurs principales"
                },
                {
                    name: "Nombre de couleurs de rabat",
                    test: () => flapColors.length === 6,
                    description: "Doit avoir exactement 6 couleurs de rabat"
                },
                {
                    name: "Pr√©sence du Bleu Tiffany",
                    test: () => flapColors.some(c => c.color === "#81D4E6"),
                    description: "Le Bleu Tiffany (#81D4E6) doit remplacer le Bleu Marine"
                },
                {
                    name: "Images principales charg√©es",
                    test: () => {
                        const body = document.getElementById('bag-body');
                        const handle = document.getElementById('bag-handle');
                        return body.src.includes('main-colors') && handle.src.includes('main-colors');
                    },
                    description: "Les images du corps et de l'anse doivent venir de main-colors/"
                },
                {
                    name: "Image rabat charg√©e",
                    test: () => {
                        const flap = document.getElementById('bag-flap');
                        return flap.src.includes('colors/');
                    },
                    description: "L'image du rabat doit venir de colors/"
                },
                {
                    name: "Configuration actuelle valide",
                    test: () => {
                        return currentMainColor && currentFlapColor;
                    },
                    description: "Une couleur principale et une couleur de rabat doivent √™tre s√©lectionn√©es"
                }
            ];

            const resultsContainer = document.getElementById('validation-results');
            resultsContainer.innerHTML = '';

            tests.forEach(test => {
                const result = test.test();
                const testElement = document.createElement('div');
                testElement.className = `test-item ${result ? 'pass' : 'fail'}`;
                testElement.innerHTML = `
                    <strong>${result ? '‚úÖ' : '‚ùå'} ${test.name}</strong><br>
                    <small>${test.description}</small>
                `;
                resultsContainer.appendChild(testElement);
            });
        }

        // Ex√©cuter les tests au chargement
        window.addEventListener('load', () => {
            setTimeout(runValidationTests, 500);
        });

        // Test de chargement des images avec gestion d'erreur
        document.querySelectorAll('img').forEach(img => {
            img.addEventListener('error', function() {
                console.error('Erreur de chargement:', this.src);
                this.style.border = '2px solid red';
                this.alt = `ERREUR: ${this.src}`;
            });
            
            img.addEventListener('load', function() {
                console.log('Image charg√©e:', this.src);
            });
        });
    </script>
</body>
</html>
